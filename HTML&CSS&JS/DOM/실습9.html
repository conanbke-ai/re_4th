<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>JS íƒ€ì´ë¨¸ ì‹¤ìŠµ</title>
  <style>
    body {
      background:#2d2f36;
      color:#f5f5f5;
      font-family: Arial, sans-serif;
      padding:20px;
    }
    h1,h2 {
      margin-bottom:10px;
    }
    .box {
      border:1px solid #555;
      padding:15px;
      margin-bottom:20px;
      border-radius:8px;
    }
    .time-display {
      font-size: 40px;
      font-weight:bold;
      margin:10px 0;
    }
    button {
      margin-right:8px;
      margin-top:5px;
      padding:5px 10px;
      cursor:pointer;
    }
    input {
      padding:4px 6px;
    }
  </style>
</head>
<body>
  <h1>ì‹¤ìŠµ ê³¼ì œ ëª¨ìŒ</h1>

  <!-- ê³¼ì œ 1: ë””ì§€í„¸ ì‹œê³„ -->
  <div class="box">
    <h2>ê³¼ì œ 1. ë””ì§€í„¸ ì‹œê³„ â°</h2>
    <div id="clock" class="time-display">00:00:00</div>
  </div>

  <!-- ê³¼ì œ 2: ìŠ¤í†±ì›Œì¹˜ -->
  <div class="box">
    <h2>ê³¼ì œ 2. ìŠ¤í†±ì›Œì¹˜ â±</h2>
    <div id="stopwatch" class="time-display">00:00.0</div>
    <button onclick="startStopwatch()">ì‹œì‘</button>
    <button onclick="pauseStopwatch()">ì¼ì‹œì •ì§€</button>
    <button onclick="resetStopwatch()">ì´ˆê¸°í™”</button>
  </div>

  <!-- ê³¼ì œ 3: ì•Œë¦¼ ì‹œìŠ¤í…œ -->
  <div class="box">
    <h2>ê³¼ì œ 3. ì•Œë¦¼ ì‹œìŠ¤í…œ ğŸ””</h2>
    <p>Nì´ˆ í›„ì— ì•Œë¦¼ ë„ìš°ê¸°</p>
    <input type="number" id="alarmSeconds" placeholder="ì´ˆ ì…ë ¥" min="1">
    <button onclick="setAlarm()">ì•Œë¦¼ ì„¤ì •</button>
    <button onclick="cancelAlarm()">ì•Œë¦¼ ì·¨ì†Œ</button>
    <p id="alarmStatus"></p>
  </div>

  <script>
    /* ============================
       1. ë””ì§€í„¸ ì‹œê³„
       ============================ */
    function updateClock() {
      const now = new Date();          // í˜„ì¬ ì‹œê°„ ê°ì²´
      let h = String(now.getHours()).padStart(2, "0");   // ì‹œ
      let m = String(now.getMinutes()).padStart(2, "0"); // ë¶„
      let s = String(now.getSeconds()).padStart(2, "0"); // ì´ˆ

      document.getElementById("clock").textContent = `${h}:${m}:${s}`;
    }
    // ì²˜ìŒ í•œ ë²ˆ ë°”ë¡œ ì‹¤í–‰í•˜ê³ , 1ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
    updateClock();
    setInterval(updateClock, 1000);

    /* ============================
       2. ìŠ¤í†±ì›Œì¹˜ (ì‹œì‘/ì •ì§€/ì´ˆê¸°í™”)
       ============================ */
    let swInterval = null;   // setInterval ID
    let swStartTime = 0;     // ì‹œì‘ ì‹œì  (Timestamp)
    let swElapsed = 0;       // ì§€ê¸ˆê¹Œì§€ ì§€ë‚œ ì‹œê°„(ms)
    let swRunning = false;

    function renderStopwatch() {
      // ì „ì²´ ê²½ê³¼ ì‹œê°„ì„ ê¸°ì¤€ìœ¼ë¡œ ë¶„/ì´ˆ/0.1ì´ˆ ê³„ì‚°
      const totalMs = swElapsed;
      const totalSec = Math.floor(totalMs / 1000);
      const minutes = String(Math.floor(totalSec / 60)).padStart(2, "0");
      const seconds = String(totalSec % 60).padStart(2, "0");
      const tenth = Math.floor((totalMs % 1000) / 100); // 0.1ì´ˆ ë‹¨ìœ„

      document.getElementById("stopwatch").textContent =
        `${minutes}:${seconds}.${tenth}`;
    }

    function startStopwatch() {
      if (swRunning) return;  // ì´ë¯¸ ë™ì‘ ì¤‘ì´ë©´ ë¬´ì‹œ
      swRunning = true;
      // ì§€ê¸ˆê¹Œì§€ ì§€ë‚œ ì‹œê°„ì„ ë³´ì •í•´ì„œ ë‹¤ì‹œ ì‹œì‘
      swStartTime = Date.now() - swElapsed;

      swInterval = setInterval(() => {
        swElapsed = Date.now() - swStartTime;
        renderStopwatch();
      }, 100); // 0.1ì´ˆë§ˆë‹¤ í™”ë©´ ì—…ë°ì´íŠ¸
    }

    function pauseStopwatch() {
      if (!swRunning) return;
      clearInterval(swInterval);
      swRunning = false;
    }

    function resetStopwatch() {
      clearInterval(swInterval);
      swRunning = false;
      swElapsed = 0;
      renderStopwatch();
    }

    /* ============================
       3. ì•Œë¦¼ ì‹œìŠ¤í…œ (Nì´ˆ í›„ ì•Œë¦¼)
       ============================ */
    let alarmTimeoutId = null;

    function setAlarm() {
      const secInput = document.getElementById("alarmSeconds");
      const status = document.getElementById("alarmStatus");
      const seconds = Number(secInput.value);

      if (!seconds || seconds <= 0) {
        alert("1 ì´ìƒì˜ ì´ˆë¥¼ ì…ë ¥í•´ ì£¼ì„¸ìš”.");
        return;
      }

      // ê¸°ì¡´ ì•Œë¦¼ ìˆìœ¼ë©´ ì·¨ì†Œ
      if (alarmTimeoutId !== null) {
        clearTimeout(alarmTimeoutId);
      }

      status.textContent = `${seconds}ì´ˆ í›„ì— ì•Œë¦¼ì´ ìš¸ë¦½ë‹ˆë‹¤.`;

      alarmTimeoutId = setTimeout(() => {
        alert("ğŸ”” ì•Œë¦¼ ì‹œê°„ì…ë‹ˆë‹¤!");
        status.textContent = "ì•Œë¦¼ì´ ìš¸ë ¸ìŠµë‹ˆë‹¤.";
        alarmTimeoutId = null;
      }, seconds * 1000);
    }

    function cancelAlarm() {
      const status = document.getElementById("alarmStatus");
      if (alarmTimeoutId !== null) {
        clearTimeout(alarmTimeoutId);
        alarmTimeoutId = null;
        status.textContent = "ì•Œë¦¼ì´ ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.";
      } else {
        status.textContent = "ì„¤ì •ëœ ì•Œë¦¼ì´ ì—†ìŠµë‹ˆë‹¤.";
      }
    }
  </script>
</body>
</html>
